{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Peek JSON AI Access Manifest - Content Publisher Configuration for AI Licensing",
  "description": "A JSON-based standard that evolves the robots.txt protocol for the AI era, enabling fair and equitable engagement between content publishers and AI systems through tool-based access control and transparent pricing.",
  "type": "object",
  "required": ["version", "meta", "license", "enforcement"],
  "properties": {
    "version": {
      "type": "string"
    },
    "meta": {
      "type": "object",
      "required": ["site_name", "publisher", "categories", "last_updated", "domains"],
      "properties": {
        "site_name": {
          "type": "string",
          "description": "Human-readable name of the specific website or publication (e.g., 'TechNews Daily', 'The New York Times')."
        },
        "publisher": {
          "type": "string",
          "description": "Name of the company or organization that owns and publishes the site (e.g., 'TechNews Corp', 'The New York Times Company')."
        },
        "domains": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of domains and subdomains covered by this manifest. Use wildcards for subdomain patterns (e.g., '*.example.com' covers all subdomains)."
        },
        "categories": {
          "type": "array",
          "items": { "type": "string" }
        },
        "last_updated": { "type": "string", "format": "date" }
      }
    },
    "enforcement": {
      "type": "object",
      "description": "Edge enforcement settings for CDN/worker integration.",
      "required": ["failover_mode"],
      "properties": {
        "rate_limit_per_ip": {
          "type": "integer",
          "default": 100,
          "description": "Requests per hour allowed per IP address for unlicensed traffic."
        },
        "grace_period_seconds": {
          "type": "integer",
          "default": 300,
          "description": "Grace period when license API is unavailable before applying failover mode."
        },
        "failover_mode": {
          "type": "string",
          "enum": ["deny", "allow", "cache_only"],
          "default": "deny",
          "description": "Behavior when license API is unavailable: deny (reject), allow (permit), cache_only (serve cached responses only)."
        },
        "bypass_paths": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Paths that bypass license requirements (e.g., ['/robots.txt', '/sitemap.xml', '/.well-known/*'])."
        }
      }
    },
    "license": {
      "type": "object",
      "required": ["license_issuer", "terms_url"],
      "properties": {
        "license_issuer": {
          "type": "string",
          "format": "uri",
          "description": "Endpoint to request or inspect a license and remaining budget."
        },
        "terms_url": {
          "type": "string",
          "format": "uri",
          "description": "Link to the legal terms and conditions for content licensing."
        },
        "content_hints": {
          "type": "object",
          "description": "Optional efficiency hints for AI systems.",
          "properties": {
            "average_page_size_kb": {
              "type": "number",
              "description": "Typical page size in kilobytes to help with quota planning."
            },
            "content_types": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Available content types (e.g., 'text/html', 'application/json')."
            },
            "update_frequency": {
              "type": "string",
              "enum": ["hourly", "daily", "weekly", "monthly"],
              "description": "How often content changes."
            },
            "cache_duration": {
              "type": "number",
              "description": "Suggested cache duration in seconds."
            }
          }
        }
      }
    }
  }
}
