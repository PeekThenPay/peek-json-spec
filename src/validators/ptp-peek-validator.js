import { fullFormats } from "ajv-formats/dist/formats.js";
export default validate20;const schema31 = {"$schema":"https://json-schema.org/draft/2020-12/schema","title":"Peek-Then-Pay Peek Intent Response","type":"object","description":"Minimal, discovery-only preview of a resource.","properties":{"type":{"type":"string","const":"peek","description":"Identifies this response as preview content"},"canonicalUrl":{"type":"string","format":"uri"},"title":{"type":"string","minLength":1,"maxLength":220},"snippet":{"type":"string","description":"Ultra-short preview, summary, or description. For text content: excerpt or summary. For images: alt text or AI description. For videos/audio: description or transcript preview. For documents: summary or metadata description.","minLength":10,"maxLength":500},"metadata":{"type":"object","description":"Media-specific metadata for non-text content types.","properties":{"duration":{"type":"number","description":"Duration in seconds for audio/video content."},"dimensions":{"type":"object","properties":{"width":{"type":"integer","minimum":1},"height":{"type":"integer","minimum":1}},"required":["width","height"],"description":"Pixel dimensions for image/video content."},"fileSize":{"type":"integer","minimum":0,"description":"File size in bytes."},"pageCount":{"type":"integer","minimum":1,"description":"Number of pages for document content."},"author":{"type":"string","description":"Author or creator metadata."}},"additionalProperties":true},"language":{"type":"string","description":"IETF BCP-47 language tag, e.g., en or en-US."},"contentType":{"$ref":"common-defs.schema.json#/$defs/contentType"},"mediaType":{"$ref":"common-defs.schema.json#/$defs/mediaType"},"signals":{"type":"object","description":"Non-content signals for ranking/UX; safe to cache.","properties":{"tokenCountEstimate":{"type":"integer","minimum":0}},"additionalProperties":true},"tags":{"type":"array","items":{"type":"string","minLength":1},"maxItems":12},"peekManifestUrl":{"type":"string","format":"uri"},"error":{"type":"string","enum":["invalid_license","insufficient_budget","license_expired"],"description":"Error type when peek response is returned with HTTP 403 due to license issues."},"message":{"type":"string","description":"Human-readable error message providing details about license issues."}},"required":["type","canonicalUrl","title","snippet","peekManifestUrl","mediaType"],"additionalProperties":false};const schema33 = {"type":"string","description":"High-level classification for routing.","enum":["article","blog","doc","news","video","audio","dataset","other"]};const schema34 = {"type":"string","description":"MIME type of the resource.","anyOf":[{"enum":["text/html","text/markdown","text/plain","application/pdf","application/json","image/jpeg","image/png","audio/mpeg","video/mp4","application/octet-stream","unknown"]},{"pattern":"^(text|image|audio|video|application)/[A-Za-z0-9.+-]+$"}]};const func1 = Object.prototype.hasOwnProperty;const func2 = require("ajv/dist/runtime/ucs2length").default;const formats0 = fullFormats.uri;const pattern4 = new RegExp("^(text|image|audio|video|application)/[A-Za-z0-9.+-]+$", "u");function validate20(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){let vErrors = null;let errors = 0;const evaluated0 = validate20.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.canonicalUrl === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "canonicalUrl"},message:"must have required property '"+"canonicalUrl"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.title === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "title"},message:"must have required property '"+"title"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.snippet === undefined){const err3 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "snippet"},message:"must have required property '"+"snippet"+"'"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data.peekManifestUrl === undefined){const err4 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "peekManifestUrl"},message:"must have required property '"+"peekManifestUrl"+"'"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if(data.mediaType === undefined){const err5 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "mediaType"},message:"must have required property '"+"mediaType"+"'"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}for(const key0 in data){if(!(func1.call(schema31.properties, key0))){const err6 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.type !== undefined){let data0 = data.type;if(typeof data0 !== "string"){const err7 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}if("peek" !== data0){const err8 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "peek"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.canonicalUrl !== undefined){let data1 = data.canonicalUrl;if(typeof data1 === "string"){if(!(formats0(data1))){const err9 = {instancePath:instancePath+"/canonicalUrl",schemaPath:"#/properties/canonicalUrl/format",keyword:"format",params:{format: "uri"},message:"must match format \""+"uri"+"\""};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}else {const err10 = {instancePath:instancePath+"/canonicalUrl",schemaPath:"#/properties/canonicalUrl/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.title !== undefined){let data2 = data.title;if(typeof data2 === "string"){if(func2(data2) > 220){const err11 = {instancePath:instancePath+"/title",schemaPath:"#/properties/title/maxLength",keyword:"maxLength",params:{limit: 220},message:"must NOT have more than 220 characters"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if(func2(data2) < 1){const err12 = {instancePath:instancePath+"/title",schemaPath:"#/properties/title/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}else {const err13 = {instancePath:instancePath+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data.snippet !== undefined){let data3 = data.snippet;if(typeof data3 === "string"){if(func2(data3) > 500){const err14 = {instancePath:instancePath+"/snippet",schemaPath:"#/properties/snippet/maxLength",keyword:"maxLength",params:{limit: 500},message:"must NOT have more than 500 characters"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if(func2(data3) < 10){const err15 = {instancePath:instancePath+"/snippet",schemaPath:"#/properties/snippet/minLength",keyword:"minLength",params:{limit: 10},message:"must NOT have fewer than 10 characters"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}else {const err16 = {instancePath:instancePath+"/snippet",schemaPath:"#/properties/snippet/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data.metadata !== undefined){let data4 = data.metadata;if(data4 && typeof data4 == "object" && !Array.isArray(data4)){if(data4.duration !== undefined){if(!(typeof data4.duration == "number")){const err17 = {instancePath:instancePath+"/metadata/duration",schemaPath:"#/properties/metadata/properties/duration/type",keyword:"type",params:{type: "number"},message:"must be number"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data4.dimensions !== undefined){let data6 = data4.dimensions;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){if(data6.width === undefined){const err18 = {instancePath:instancePath+"/metadata/dimensions",schemaPath:"#/properties/metadata/properties/dimensions/required",keyword:"required",params:{missingProperty: "width"},message:"must have required property '"+"width"+"'"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if(data6.height === undefined){const err19 = {instancePath:instancePath+"/metadata/dimensions",schemaPath:"#/properties/metadata/properties/dimensions/required",keyword:"required",params:{missingProperty: "height"},message:"must have required property '"+"height"+"'"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if(data6.width !== undefined){let data7 = data6.width;if(!((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7)))){const err20 = {instancePath:instancePath+"/metadata/dimensions/width",schemaPath:"#/properties/metadata/properties/dimensions/properties/width/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if(typeof data7 == "number"){if(data7 < 1 || isNaN(data7)){const err21 = {instancePath:instancePath+"/metadata/dimensions/width",schemaPath:"#/properties/metadata/properties/dimensions/properties/width/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}if(data6.height !== undefined){let data8 = data6.height;if(!((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8)))){const err22 = {instancePath:instancePath+"/metadata/dimensions/height",schemaPath:"#/properties/metadata/properties/dimensions/properties/height/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if(typeof data8 == "number"){if(data8 < 1 || isNaN(data8)){const err23 = {instancePath:instancePath+"/metadata/dimensions/height",schemaPath:"#/properties/metadata/properties/dimensions/properties/height/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}}else {const err24 = {instancePath:instancePath+"/metadata/dimensions",schemaPath:"#/properties/metadata/properties/dimensions/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data4.fileSize !== undefined){let data9 = data4.fileSize;if(!((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9)))){const err25 = {instancePath:instancePath+"/metadata/fileSize",schemaPath:"#/properties/metadata/properties/fileSize/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}if(typeof data9 == "number"){if(data9 < 0 || isNaN(data9)){const err26 = {instancePath:instancePath+"/metadata/fileSize",schemaPath:"#/properties/metadata/properties/fileSize/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}}if(data4.pageCount !== undefined){let data10 = data4.pageCount;if(!((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10)))){const err27 = {instancePath:instancePath+"/metadata/pageCount",schemaPath:"#/properties/metadata/properties/pageCount/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}if(typeof data10 == "number"){if(data10 < 1 || isNaN(data10)){const err28 = {instancePath:instancePath+"/metadata/pageCount",schemaPath:"#/properties/metadata/properties/pageCount/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}if(data4.author !== undefined){if(typeof data4.author !== "string"){const err29 = {instancePath:instancePath+"/metadata/author",schemaPath:"#/properties/metadata/properties/author/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}else {const err30 = {instancePath:instancePath+"/metadata",schemaPath:"#/properties/metadata/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data.language !== undefined){if(typeof data.language !== "string"){const err31 = {instancePath:instancePath+"/language",schemaPath:"#/properties/language/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data.contentType !== undefined){let data13 = data.contentType;if(typeof data13 !== "string"){const err32 = {instancePath:instancePath+"/contentType",schemaPath:"common-defs.schema.json#/$defs/contentType/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}if(!((((((((data13 === "article") || (data13 === "blog")) || (data13 === "doc")) || (data13 === "news")) || (data13 === "video")) || (data13 === "audio")) || (data13 === "dataset")) || (data13 === "other"))){const err33 = {instancePath:instancePath+"/contentType",schemaPath:"common-defs.schema.json#/$defs/contentType/enum",keyword:"enum",params:{allowedValues: schema33.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}if(data.mediaType !== undefined){let data14 = data.mediaType;if(typeof data14 !== "string"){const err34 = {instancePath:instancePath+"/mediaType",schemaPath:"common-defs.schema.json#/$defs/mediaType/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}const _errs35 = errors;let valid5 = false;const _errs36 = errors;if(!(((((((((((data14 === "text/html") || (data14 === "text/markdown")) || (data14 === "text/plain")) || (data14 === "application/pdf")) || (data14 === "application/json")) || (data14 === "image/jpeg")) || (data14 === "image/png")) || (data14 === "audio/mpeg")) || (data14 === "video/mp4")) || (data14 === "application/octet-stream")) || (data14 === "unknown"))){const err35 = {instancePath:instancePath+"/mediaType",schemaPath:"common-defs.schema.json#/$defs/mediaType/anyOf/0/enum",keyword:"enum",params:{allowedValues: schema34.anyOf[0].enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}var _valid0 = _errs36 === errors;valid5 = valid5 || _valid0;const _errs37 = errors;if(typeof data14 === "string"){if(!pattern4.test(data14)){const err36 = {instancePath:instancePath+"/mediaType",schemaPath:"common-defs.schema.json#/$defs/mediaType/anyOf/1/pattern",keyword:"pattern",params:{pattern: "^(text|image|audio|video|application)/[A-Za-z0-9.+-]+$"},message:"must match pattern \""+"^(text|image|audio|video|application)/[A-Za-z0-9.+-]+$"+"\""};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}var _valid0 = _errs37 === errors;valid5 = valid5 || _valid0;if(!valid5){const err37 = {instancePath:instancePath+"/mediaType",schemaPath:"common-defs.schema.json#/$defs/mediaType/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}else {errors = _errs35;if(vErrors !== null){if(_errs35){vErrors.length = _errs35;}else {vErrors = null;}}}}if(data.signals !== undefined){let data15 = data.signals;if(data15 && typeof data15 == "object" && !Array.isArray(data15)){if(data15.tokenCountEstimate !== undefined){let data16 = data15.tokenCountEstimate;if(!((typeof data16 == "number") && (!(data16 % 1) && !isNaN(data16)))){const err38 = {instancePath:instancePath+"/signals/tokenCountEstimate",schemaPath:"#/properties/signals/properties/tokenCountEstimate/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}if(typeof data16 == "number"){if(data16 < 0 || isNaN(data16)){const err39 = {instancePath:instancePath+"/signals/tokenCountEstimate",schemaPath:"#/properties/signals/properties/tokenCountEstimate/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}}}}else {const err40 = {instancePath:instancePath+"/signals",schemaPath:"#/properties/signals/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}if(data.tags !== undefined){let data17 = data.tags;if(Array.isArray(data17)){if(data17.length > 12){const err41 = {instancePath:instancePath+"/tags",schemaPath:"#/properties/tags/maxItems",keyword:"maxItems",params:{limit: 12},message:"must NOT have more than 12 items"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}const len0 = data17.length;for(let i0=0; i0<len0; i0++){let data18 = data17[i0];if(typeof data18 === "string"){if(func2(data18) < 1){const err42 = {instancePath:instancePath+"/tags/" + i0,schemaPath:"#/properties/tags/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}}else {const err43 = {instancePath:instancePath+"/tags/" + i0,schemaPath:"#/properties/tags/items/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}}}else {const err44 = {instancePath:instancePath+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}}if(data.peekManifestUrl !== undefined){let data19 = data.peekManifestUrl;if(typeof data19 === "string"){if(!(formats0(data19))){const err45 = {instancePath:instancePath+"/peekManifestUrl",schemaPath:"#/properties/peekManifestUrl/format",keyword:"format",params:{format: "uri"},message:"must match format \""+"uri"+"\""};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}else {const err46 = {instancePath:instancePath+"/peekManifestUrl",schemaPath:"#/properties/peekManifestUrl/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}}if(data.error !== undefined){let data20 = data.error;if(typeof data20 !== "string"){const err47 = {instancePath:instancePath+"/error",schemaPath:"#/properties/error/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}if(!(((data20 === "invalid_license") || (data20 === "insufficient_budget")) || (data20 === "license_expired"))){const err48 = {instancePath:instancePath+"/error",schemaPath:"#/properties/error/enum",keyword:"enum",params:{allowedValues: schema31.properties.error.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}}if(data.message !== undefined){if(typeof data.message !== "string"){const err49 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}}}else {const err50 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}validate20.errors = vErrors;return errors === 0;}validate20.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};